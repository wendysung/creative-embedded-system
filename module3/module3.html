<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="data:,">

    <!-- jquery -->
    <script src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>  
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css">

    <!-- Static CSS -->
    <link rel="stylesheet" href="../styles.css">

</head>
<body>
    <!-- navbar-expand-lg navbar-light bg-light -->
    <div class="container-fluid">   
        <nav class="navbar">
            <a class="logo"  href="../index.html">Wendy's Creative Embedded System</a>
        </nav>

        <h1>Module 3: Meditate to Your Beat</h1>
        <div class="basic-overview">
            <br>
            <h3>Basic Overview</h3>
            <div class="inline_container">
                <div class="left_text">
                    <p>
                        My project is an interactive visualization for heart beat meditation. A person will sit in from of the projected screen and place 
                        their finger to a pulse sensor that is attached to a heart model. As they sit and meditate, the heart model will glow in red to their heart 
                        beat. This heart beat will also be projected onto the screen and interact with the visualization I have created. This This visualization 
                        will help user see how their heart beat and breathing is adapting throughout their meditation.
                    <br>
                    <br>
                    <div class="Materials">
                        <h3>Materials</h3>
                        <ul>
                            <li>1 ESP32 TTGO T-display</li>
                            <li>1 USB-C cord</li>
                            <li>Arduino</li>
                            <li>Touch Designer</li>
                            <li>150ohm resistor</li>
                            <li>2v red LED</li>
                            <li>1 Pulse Sensor</li>
                            <li><a href="https://github.com/WorldFamousElectronics/PulseSensorPlayground">Pulse Sensor Playground Library</a></li>
                            <li>3D printer</li>
                            <li>PLA 3D filament</li>
                            <li>UltiMaker Cura</li>
                            
                        </ul>
                        <br>
                    </div>
                </div>
                <div class="right_text">
                    <img src="../images/module3_heart.JPG" alt="heartModel" height="400">
                </div>
            </div>
        </div>
        <br>
       

        <div class="Process">
            <h3>Technical Documentation</h3>
            <div>
                <div class="subtitle">Calculating Resistor Required</div>
                <br>
                <div style="display: flex;">
                    <div class="left" style="margin-right: 10px; max-width: 50%;">

                        <p>An LED in a circuit without a limiting resistor can easily exceed its maximum current and burn out. o calculate the resistor 
                            <br>values needed to protect the LED, use Ohmâ€™s Law V = I x R.
                            <br>
                            To calculate the resistor for the red LED, we need to take into account of its Forward Voltage and Forward Current into the Ohm's Law.
                            <ul>
                                <li>The forward voltage (V_F) is the voltage drop across the LED, and is thus subtracted from the supply voltage (V_S).</li>
                                <li>The forward voltage (V_F)is typically in the range of 1.8-2V for Red LED.</li> 
                                <li>The maximum forward current (I_F) is typically is 20mA for Red LED.</li> 
                            </ul>
                            For our project, the red LED has a V_F of 2V and I_F of 20mA, powered by 5V. Hence, we will be using a 150ohm resistor.
                        </p>

                    </div>
                    <div class="right">
                        <img src="../images/resistor_equation.jpeg" alt="resistor equation" height="100">
                        <img src="../images/resistor_for_RedLED.jpeg" alt="resistor for red LED" height="100">
                        <img src="../images/150ohm_resistor.jpeg" alt="resistor for red LED" height="190">

                    </div>
                </div>
                <br>
                <div class="subtitle">Setting up LED and Pulse Sensor</div>
                <br>
                <div style="display: flex;">
                    <div class="left" style="margin-right: 10px; max-width: 50%;">

                        <p>1. Set up ESP32, resistor and red LED on a breadboard according to the 1st schematic diagram. </p>

                        <p>2. Set up pulse sensor according to the 2nd schematic diagram.
                            <ul>
                                <li>Purple wire - Pulse Sensor Analogue Pin </li>
                                <li>Red wire - VCC Pin </li>
                                <li>Black wire - GND Pin</li>
                            </ul>
                        </p>

                        <p>3. Install <span>PulseSensor Playground</span> by going to <span>Sketch > Include Library > Manage Library...</span></p>

                        <p>2. Install code
                            <ul>
                                <li>Test on Arduino's serial monitor to see if the values are showing up and if the LED is blinking. You should give it a minute for the heart beat to be adjusted</li>
                                <li>If the LED is not blinking, change the threshold value. The threshold value can take values from 0-4095.</li>
                                <li>If no value is showing up on the serial monitor, it might be an issue with the pins or breadboard. You have to move around and switch pins to find ones that work. </li>
                            </ul>
                        </p>     
                    </div>
                    <div class="right">
                        <img src="../images/module3_schematic_diagram_LED.jpeg" alt="Schematic" height="300">
                        <img src="../images/pulse_sensor_schematic.png" alt="Schematic" height="300">
                        <img src="../images/pulse-sensor-wiring.jpeg" alt="wiring" height="300">
                    </div>
                </div>
            </div>
            <br>
            <div>
                <div class="subtitle">Enclosure Building - 3D heart model</div>
                <br>
                <div style="display: flex;">
                    <div class="left" style="margin-right: 10px; max-width: 50%;">
                        <p>I found a heart model on thingiverse that has a platform so i could hide components below. I decided to print the heart in translucent PLA so 
                            <br> that the red LED could shine through when it blinks. For the platform, I decided to print it with red PLA so that it matches the 
                            <br> red flash.
                        </p>
                        <br>
                        <p>
                        To print the 3D models, I dowloaded STL files from thingiverse and uploaded them to <span>UltiMaker Cura</span> for configuration. I changed to the <br>
                        setting to 0.4 nozzle for a thinner look so that the LED light will shine through more. 
                        </p>
                    </div>
                    <div class="right">
                        <img src="../images/3D printer.jpeg" alt="heart 3D model" height="250">

                        <img src="../images/heart_3Dmodel.jpeg" alt="heart 3D model" height="250">
                    </div>
                </div>
            </div>
            <br>
            <div>
                <div class="subtitle">Software Building</div>
                <br>
                <div style="display: flex;">
                    <div class="left" style="margin-right: 10px; max-width: 50%;">
                        
                        <p><a href="">PulseRate.ino</a> - Setting up pulse rate sensor and LED pins with ESP32 for serial communication</p>    
                        
                        <p>
                            <ul>
                                <li>Open the serial port at a set baud rate for serial data transmission. </li>
                                <li>Reads data from the pulse sensor to Serial Monitor.</li>
                                <li>LED blink with each heart beat.</li>
                                <li>Prints data to the serial port as human-readable ASCII text.</li>
                            </ul>
                        </p>

                        <p><a href="">heart.toe</a> - Touch Designer file for creating visualizations based off heart beat
                        </p>    
                        
                        <p>
                            <ul>
                                <li>Import Heart Emoji to set it up against a noise background.</li>
                                <li>Noise background is dispalced by another noise background, manipulated by feedback loops of its edges.</li>
                                <li>Heart Emoji exapnds to the heart beat.</li>
                                <li>"Null 6" for final outcome</li>
                            </ul>
                        </p>

                    </div>
                    <div class="right">
                        <img src="../images/module3_touchdesigner.jpeg" alt="touch designer chart" height="300">
                    </div>
                </div>
            </div>
            <br>
            <div>
                <div class="subtitle">Running the Program with Touch Designer</div>
                <br>
                <div style="display: flex;">
                    <div class="left" style="margin-right: 10px; max-width: 50%;">
                        
                        <p>1. Open <a href="">PulseRate.ino</a> in Arduino and run it on ESP32. Make sure the baud rate is set to 115200.
                        </p>

                        <p>
                            2. Open <a href="">heart.toe</a> in Touch Designer. 
                        </p>

                        <p>
                            3. Select correct port under 'Serial 1'. It will read data from the ESP32.
                        </p>

                        <p>
                            4. Select 'Null 6' to view final visualization.
                        </p>

                    </div>
                    <div class="right">
                        <img src="../images/serial.jpeg" alt="touch designer chart" height="150">
                        <img src="../images/null6.jpeg" alt="null6" height="150">

                    </div>
                </div>
            </div>


        </div>
        <br>
        <div class="reflection">
            <h3>Reflection</h3>
            <p>I really enjoyed constructing an interactive device and enclosure for this project. Building hardwares something I have never experienced so it was really educational and empowering
                to learn to read hardware schematics and how it could interact with my creative code. A key challenge for me was figuring out why the Z values from the joystick was not responding, 
                The class discussion chat was helpful in getting suggestions on debugging the solution and in the end it took trial and error to figure out which pins was not compatible.</p>
        </div>
        <div class="Installation Video">
            <h3>Video</h3>
            <iframe width="560" height="315" src="https://youtu.be/xbElPfbKn1U" title="Interactive Art: Collage Builder" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        </div>
    </div>
</body>
</html>
